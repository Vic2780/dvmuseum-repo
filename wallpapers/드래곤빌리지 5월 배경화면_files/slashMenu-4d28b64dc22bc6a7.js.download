"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[49674,65496],{115944:(e,t,i)=>{i.d(t,{o:()=>p,q:()=>g});var o=()=>i(716489),n=()=>i(268056),s=()=>i(489086),r=()=>i(828685),a=()=>i(80444),l=()=>i(924666),d=()=>i(574034),c=()=>i(237181);function u(){const e=l().default.state;if("editing"===e.mode){const t=(0,n().QY)(e.multiSelection);if(t&&(0,s().wd)(t.selection)){const e=t.store,i=r().E.findEditableWithStore(e);if(i){return e.getValue()?void 0:i}}}}function p(){return(0,o().VK)(u,[])}function g(e){const{currentUserSettingsStore:t}=a().default.state;t&&d().createAndCommit({userAction:"educationTooltipsActions.completePressSlashTooltip",environment:e,perform:e=>{c().d2({userSettingsStore:t,transaction:e,data:{pressed_slash_tooltip:!0}})},userId:t.id})}},279698:(e,t,i)=>{i.d(t,{j:()=>p});var o=()=>i(914542),n=()=>i(896809),s=()=>i(547307),r=()=>i(496802),a=()=>i(627153),l=()=>i(574034),d=()=>i(977357);const c=1500,u=(0,i(709291).vU)({pageCover:{defaultMessage:"Page cover",id:"pageCover.title"},fileTypeCaption:{defaultMessage:"Images wider than {idealImageWidth} pixels work best.",id:"pageCover.fileType.caption"},uploadFailed:{defaultMessage:"Upload failed",id:"pageCover.errorDialogMessage.uploadFailed"},embedTitle:{defaultMessage:"Link",id:"pageCover.embedType.title"},embedPlaceholder:{defaultMessage:"Paste an image linkâ€¦",id:"pageCover.embedType.placeholder"},embedCaption:{defaultMessage:"Works with any image from the web.",id:"pageCover.embedType.caption"},embedSubmit:{defaultMessage:"Submit",id:"pageCover.embedType.buttonText"}});function p(e){let{environment:t,intl:i,store:o,rect:n}=e;a().$(t,{originGap:3,originRect:n,isSmallWidth:!1,popupWidth:540,maxHeight:485,title:i.formatMessage(u.pageCover),onDelete:()=>{!function(e){let{environment:t,store:i}=e;a().Z(),l().createAndCommit({userAction:"PageCover.handleDelete",environment:t,perform:e=>{r().MF({store:i,transaction:e})}})}({environment:t,store:o})},currentTab:"gallery",tabs:[{type:"gallery",onChange:e=>{let{url:i,position:n}=e;m({environment:t,store:o,url:i,position:n})}},{type:"file",fileUpload:!1,imageUpload:!0,videoUpload:!1,caption:i.formatMessage(u.fileTypeCaption,{idealImageWidth:c}),onUpload:e=>{a().Z(),d().cT({environment:t,file:e[0],bucket:"secure",record:o.pointer,onStart:h,onProgress:f,onComplete:e=>{var i;i={environment:t,store:o,url:e},g({...i,position:.5})},onError:()=>{s().UW(i.formatMessage(u.uploadFailed))}})}},{type:"embed",title:i.formatMessage(u.embedTitle),inputPlaceholder:i.formatMessage(u.embedPlaceholder),caption:i.formatMessage(u.embedCaption),buttonText:i.formatMessage(u.embedSubmit),onChange:e=>{var i;i={environment:t,store:o,url:e},g({...i,position:.5}),a().Z()}},{type:"unsplash",onChange:e=>{let{url:i,position:n}=e;m({environment:t,store:o,url:i,position:n})}}]})}async function g(e){const{environment:t,store:i,url:s,position:a}=e,{serverCommitResult:d}=l().createAndCommit({userAction:"PageCover.updatePageCover",environment:t,perform:e=>{r().fs({store:i,url:s,position:a||.5,transaction:e})}});await d,n().Z.state.loadingMode===o().NS&&n().Z.setState({loadingMode:o().EP,dataURL:n().Z.state.dataURL,uploadProgress:100})}function m(e){g(e),e.environment.device.isMobile&&a().Z()}function h(e){const{file:t,name:i,size:s}=e;if(a().Z(),n().Z.setState({loadingMode:o().SS,file:t,name:i,size:s}),t.type.indexOf("image")>=0){const e=new FileReader;e.onload=e=>{n().Z.state.loadingMode===o().SS&&n().Z.setState({...n().Z.state,uploadProgress:0,loadingMode:o().NS,dataURL:e.target.result})},e.readAsDataURL(t)}}function f(e){const{progressPercent:t}=e;n().Z.state.loadingMode===o().NS&&n().Z.setState({...n().Z.state,uploadProgress:t})}},208592:(e,t,i)=>{i.d(t,{_:()=>s,s:()=>n});var o=()=>i(277907);const n=(0,o().kF)(new(o().Ss)("UniversalQnaModals",(async()=>await Promise.all([i.e(62743),i.e(84885),i.e(90698),i.e(5242),i.e(7312),i.e(90424),i.e(31189),i.e(69343),i.e(46293),i.e(16732),i.e(11002),i.e(16536),i.e(2647),i.e(46616),i.e(62451),i.e(43627),i.e(99417),i.e(66727),i.e(95289),i.e(84654),i.e(43847),i.e(8173),i.e(36821),i.e(88833),i.e(93216),i.e(5661),i.e(45258),i.e(17439),i.e(92721),i.e(59434),i.e(54540),i.e(55649),i.e(57916),i.e(62987),i.e(27161),i.e(36868),i.e(41837),i.e(63286),i.e(97589),i.e(58183)]).then(i.bind(i,502658)))),(e=>e.UniversalQnaModals)),s=(0,o().kF)(new(o().Ss)("SlackConnectionOptions",(async()=>await i.e(16982).then(i.bind(i,728501)))),(e=>e.SlackConnectionOptions))},487636:(e,t,i)=>{i.d(t,{Z:()=>c});i(267602),i(653476),i(241792),i(258429);var o=i(667294),n=()=>i(724405),s=()=>i(222491),r=()=>i(137810),a=()=>i(417311),l=i(785893);function d(e){const{button:t,isLast:i}=e,a=(0,n().yK)((e=>({button:{display:"flex",alignItems:"center",padding:"4px 6px",fontWeight:r().ZP.fontWeight.medium,borderRight:`1px solid ${e.regularDividerColor}`,color:e.actionMenuButtonTextColor,fill:e.actionMenuButtonTextColor},buttonLast:{borderRight:"none"},buttonHovered:{background:e.whiteButtonHoveredBackground},buttonPressed:{background:e.whiteButtonPressedBackground}})),[]);return o.cloneElement(t,{...(0,s().iv)(t.props.style,a.button,i&&a.buttonLast),hoveredStyle:(0,s().iv)(a.buttonHovered,i&&a.buttonLast).style,pressedStyle:a.buttonPressed})}const c=function(e){let{children:t,isVisible:c,position:u,style:p}=e;const g=(0,i(800480).O7)(),m=(0,n().yK)((e=>({container:{color:e.actionMenuButtonTextColor,fill:e.actionMenuButtonTextColor,fontSize:12,background:e.whiteButtonBackground,boxShadow:e.lightBoxShadow,display:"flex",whiteSpace:"nowrap",borderRadius:a().Z.borderRadius,maxWidth:"calc(100% - 16px)",minHeight:24,overflow:"hidden",pointerEvents:g.device.isMobile?"auto":"none",opacity:g.device.isMobile?1:0,fontFamily:r().ZP.getCompositeFontFamily(i(313991).locale).sans,position:"absolute",right:a().Z.horizontal.small,bottom:a().Z.vertical.small,zIndex:2},containerHover:{pointerEvents:"auto",opacity:1},containerTop:{top:a().Z.vertical.small,bottom:void 0}})),[g]),h=o.Children.toArray(t).filter(i(401898).$K),f=h.length;return(0,l.jsx)(i(110784).Z,{isVisible:!0,animationStyle:{opacity:c?1:0},render:()=>(0,l.jsx)("div",{...(0,s().iv)(m.container,p,c&&m.containerHover,"top"===u&&m.containerTop),children:h.map(((e,t)=>{const n=t===f-1;if(e&&"object"==typeof e&&"type"in e){if(e.type===i(526388).Z&&o.isValidElement(e))return o.cloneElement(e,{render:(t,i)=>{const o=e.props.render(t,i);return(0,l.jsx)(d,{isLast:n,button:o},e.key)}});if(e.type===i(164921).Z&&o.isValidElement(e))return(0,l.jsx)(d,{isLast:n,button:e},e.key)}}))})})}},65496:(e,t,i)=>{i.d(t,{Z:()=>b});var o=i(667294),n=()=>i(800480),s=()=>i(716489),r=()=>i(709291),a=()=>i(496802),l=()=>i(279698),d=()=>i(574034),c=()=>i(110784),u=()=>i(450627),p=()=>i(914542),g=()=>i(896809),m=()=>i(487636),h=()=>i(164921),f=()=>i(199971),v=i(785893);const b=function(e){let{store:t,disabled:r,paddingRight:l,paddingLeft:c,height:u,proxyWidth:m}=e;const h=(0,n().O7)(),f=(0,s().qz)(void 0,i(128651).Z),b=(0,s().VK)((()=>r||"suggest"===i(400807).Z.getMode(t)),[r,t]),M=(0,s().VK)((()=>t.getCover()),[t]),S=(0,s().VK)((()=>g().Z.state),[]),[k,C]=(0,o.useState)(void 0);if(!M)return null;const w=S.loadingMode!==p().LU&&S.loadingMode!==p().SS;return(0,v.jsx)(i(88940).Z,{mouseStore:f,onFlushTemporaryPosition:e=>function(e,t,i){const{imagePosition:o,reset:n}=e;d().createAndCommit({userAction:"PageCover.handleFlushTemporaryPosition",environment:i,perform:e=>{a().Mp({store:t,coverPosition:o,transaction:e}),n()}})}(e,t,h),renderControl:e=>{let{handleRepositionClick:i,handleSavePositionClick:o,handleCancelClick:n,isVisible:s,isRepositioning:r}=e;return(0,v.jsx)(x,{handleRepositionClick:i,handleSavePositionClick:o,handleCancelClick:n,isVisible:s,isRepositioning:r,lastProxiedUrl:k,store:t,disabled:b,paddingRight:l,paddingLeft:c,mouseStore:f})},source:"page",store:t,style:{display:"flex",flexDirection:"column",alignItems:"center",height:u,maxHeight:280,cursor:"default"},render:e=>(0,v.jsxs)(o.Fragment,{children:[(0,v.jsx)(i(81865).Z,{url:M.cover,isAuthenticated:!0,permissionRecord:M.pointer,width:m,onFinishedLoadingProxyUrl:C,render:(t,o)=>{const n={width:"100%",height:u,maxHeight:280,objectFit:"cover",opacity:w?.5:1,objectPosition:`center ${100*(1-(e.imagePosition||0))}%`,borderRadius:0},s={width:"100%",height:u,maxHeight:280};return(0,v.jsx)(i(565107).B,{src:o,placeholderSrc:w?S.dataURL:void 0,placeholderBehavior:w?"force-show-placeholder":"show-placeholder-if-loading-src",containerStyle:s,imageStyle:n,onLoadComplete:y,testId:"pageCover"})}}),w&&(0,v.jsxs)("div",{style:i(634406).IA,children:[(0,v.jsx)(i(568785).Z,{style:{width:16,height:16,marginRight:4}}),(0,v.jsx)("div",{style:{minWidth:30,textAlign:"right"},children:(0,v.jsx)(i(532854).Z,{percentage:S.uploadProgress})})]})]})})};function y(){g().Z.reset()}function x(e){let{isVisible:t,isRepositioning:i,handleCancelClick:a,handleRepositionClick:d,handleSavePositionClick:b,lastProxiedUrl:y,store:x,disabled:M,paddingRight:S,paddingLeft:k,mouseStore:C}=e;const w=(0,n().O7)(),T=(0,r().YB)(),P=(0,o.useCallback)((e=>function(e,t,i,o,n){n.reset();const s=e.target.getBoundingClientRect();l().j({environment:t,intl:i,store:o,rect:s})}(e,w,T,x,C)),[w,T,x,C]),L=(0,s().VK)((()=>g().Z.state.loadingMode),[]),R=(0,s().VK)((()=>function(e){let t;return t=e.isFullWidth()?"100%":u().zL,t}(x)),[x]);if(M||L!==p().LU)return null;const{device:B}=w,{isMobile:Z}=B;return(0,v.jsx)(c().Z,{isVisible:!0,animationStyle:{width:R,opacity:t?1:0},render:()=>(0,v.jsx)("div",{style:{position:"absolute",pointerEvents:t?"auto":"none",maxWidth:"100%",top:48},children:(0,v.jsxs)(m().Z,{isVisible:t,position:"bottom",style:{marginRight:S,marginLeft:k},children:[!i&&(0,v.jsx)(h().Z,{style:{borderRight:Z?"none":void 0,...f().ar},onClick:P,children:(0,v.jsx)(r()._H,{defaultMessage:"Change cover",id:"pageCover.changeCover.text"})}),!i&&!Z&&(0,v.jsx)(h().Z,{style:{...f().ar,borderRight:"none"},onClick:e=>d(e,y),children:(0,v.jsx)(r()._H,{defaultMessage:"Reposition",id:"pageCover.reposition.text"})}),i&&!Z&&(0,v.jsx)(h().Z,{style:f().ar,onClick:b,children:(0,v.jsx)(r()._H,{defaultMessage:"Save position",id:"pageCover.savePosition.text"})}),i&&!Z&&(0,v.jsx)(h().Z,{style:{...f().ar,borderRight:"none"},onClick:a,children:(0,v.jsx)(r()._H,{defaultMessage:"Cancel",id:"pageCover.reposition.cancelText"})})]})})})}},427386:(e,t,i)=>{i.d(t,{Um:()=>r,ZP:()=>a,kN:()=>s});i(667294);var o=()=>i(661519),n=i(785893);function s(e){return e?18:60}function r(){return(0,n.jsx)(o().Z,{size:37})}const a=function(e){let{children:t,controlRow:o,bannerText:r,controlRowPaddingTopBottom:a,removeBoxShadow:l,contentPaddingLeftRight:d,controlRowPaddingLeftRight:c,getPaddingTopBottom:u,disableScroller:p,maxWidth:g}=e;const m=(0,i(800480).O7)(),{device:h}=m,f=u?u():h.isMobile?18:36,v=(0,i(724405).yK)((e=>({containerWithScroller:{display:"flex",flexDirection:"column",width:"100%",height:"100%",maxWidth:g??void 0,backgroundColor:e.cardContentBackground},scroller:{flexGrow:1,WebkitOverflowScrolling:"touch",transform:"translateZ(0)",paddingLeft:d??s(h.isMobile),paddingRight:d??s(h.isMobile),paddingTop:r?15:f,paddingBottom:r?22:f},controlRowWithScroller:{flexGrow:0,flexShrink:0,paddingLeft:c??s(h.isMobile),paddingRight:c??s(h.isMobile),paddingTop:a,paddingBottom:a,boxShadow:l?void 0:`0 -1px 0 ${e.regularDividerColor}`},containerWithoutScroller:{paddingLeft:s(h.isMobile),paddingRight:s(h.isMobile)},childrenWithoutScroller:{paddingTop:f,paddingBottom:f},controlRowWithoutScroller:{paddingTop:a,paddingBottom:a,boxShadow:`0 -1px 0 ${e.regularDividerColor}`}})),[g,d,h.isMobile,r,f,c,a,l]);return p?(0,n.jsxs)("div",{style:v.containerWithoutScroller,children:[(0,n.jsx)("div",{style:v.childrenWithoutScroller,children:t}),o&&(0,n.jsx)("div",{style:v.controlRowWithoutScroller,children:o})]}):(0,n.jsxs)("div",{style:v.containerWithScroller,children:[r&&(0,n.jsx)(i(791754).Z,{styleKey:i(772770).v.Blue,isMobile:!1,children:r}),(0,n.jsx)(i(56964).Z,{type:i(434859).Z.All,style:v.scroller,children:t}),o&&(0,n.jsx)("div",{style:v.controlRowWithScroller,children:o})]})}},88940:(e,t,i)=>{i.d(t,{Z:()=>f});var o=i(667294),n=()=>i(313991),s=()=>i(800480),r=()=>i(716489),a=()=>i(222491),l=()=>i(709291),d=()=>i(531701),c=()=>i(653965),u=()=>i(137810),p=()=>i(619584),g=()=>i(110784),m=i(785893);const h={isRepositioning:!1};const f=function(e){const t=(0,o.useRef)(null),n=(0,s().O7)(),{isMobile:l}=(0,s().Fy)(),[d,u]=(0,o.useState)(h),g=(0,o.useCallback)((()=>{u(h)}),[]),{renderControl:f,onFlushTemporaryPosition:b,style:y,source:x,store:M}=e,{isRepositioning:S,image:k,startDragRenderedPosition:C,startDragImageScreenHeight:w}=d,T=(0,r().VK)((()=>0===i(27724).default.state.stores.length),[]),[P,L]=(0,o.useState)(!1),R=(0,r().qz)(e.mouseStore,i(128651).Z),B=(0,r().VK)((()=>R.state.mouseEntered),[R]),Z=(0,i(724405).yK)((()=>({dragContainer:{width:"100%",cursor:S?"move":"inherit"},container:{position:"relative",width:"100%",zIndex:1}})),[S]),j=(0,r().VK)((()=>function(e,t,i){return(0,c().hj)(i)?i:function(e,t){if("gallery"===e||"board"===e){const e=t.getFormat().card_cover_position;if((0,c().hj)(e))return e}const i=.5;if(t.isCollectionView()){const e=t.getCollectionViewCollectionStore();if(e){const t=e.getFormat().collection_cover_position;return(0,p().z4)(t)?i:t}}const o=t.getFormat(),n=o.page_cover_position;if((0,c().hj)(n))return n;return i}(e,t)}(x,M,d.temporaryPosition)),[d.temporaryPosition,x,M]);(0,o.useEffect)((()=>{const e=e=>{const i=t.current;i&&!i.contains(e.target)&&S&&b({imagePosition:j,reset:()=>{R.reset(),g()}})};return window.addEventListener("mousedown",e),()=>window.removeEventListener("mousedown",e)}),[j,S,R,b,g]),S&&!T&&g();const _=(0,o.useMemo)((()=>(0,c().P2)((e=>{R.setState({...R.state,mouseEntered:!0})}),100)),[R]),E=(0,o.useMemo)((()=>(0,c().Ds)((e=>{R.setState({...R.state,mouseEntered:!1})}),100)),[R]),U=(0,o.useCallback)(((e,t)=>{i(524677).ZH({environment:n});const o=new Image;o.onload=()=>{u((e=>({...e,isRepositioning:!0,image:o})))},t&&(o.src=t)}),[n]),I=(0,o.useCallback)((e=>{b({imagePosition:j,reset:()=>{g()}})}),[j,b,g]),V=(0,o.useCallback)((e=>{const t=e.target;void 0!==t&&t instanceof HTMLElement&&(0,i(706740).E)(t)&&L(!0)}),[]),F=(0,o.useCallback)((()=>{L(!0)}),[]),A=(0,o.useCallback)((e=>{if(k&&S){const e=t.current;if(e&&e instanceof Element){const t=e.getBoundingClientRect().width/k.width*k.height;u((e=>({...e,startDragImageScreenHeight:t,startDragRenderedPosition:j})))}}}),[k,j,S]),D=(0,o.useCallback)((e=>{if(S){const t=e.diffY/(w||0)+(C||0);u((e=>({...e,temporaryPosition:(0,c().NM)((0,i(712137).Z)(t,0,1),4)})))}}),[S,w,C]),K=(0,o.useCallback)((()=>{u((e=>({...e,startDragImageScreenHeight:void 0,startDragRenderedPosition:void 0})))}),[]),N=(0,r().VK)((()=>f({handleRepositionClick:U,handleSavePositionClick:I,handleCancelClick:g,isVisible:l||B||P||S,isRepositioning:S})),[U,I,P,l,S,B,f,g]);return(0,m.jsxs)("div",{ref:t,onFocus:V,onBlur:F,onMouseEnter:_,onMouseMove:_,onMouseLeave:E,...(0,a().iv)(Z.container,y),children:[(0,m.jsx)(i(706685).Z,{onDraggableDragStart:A,onDraggableDragMove:D,onDraggableDragEnd:K,onDraggableDragCancel:K,disabled:!S,render:t=>(0,m.jsx)("div",{...(0,a().iv)(Z.dragContainer),...t,children:e.render({imagePosition:j,isRepositioning:S})})}),(0,m.jsx)(v,{small:e.small,isRepositioning:S}),N]})};function v(e){let{small:t,isRepositioning:i}=e;if(t)return null;const o={background:d().ZP.blackWithAlpha(.4),borderRadius:4,color:d().ZP.white,fontSize:12,fontFamily:u().ZP.getCompositeFontFamily(n().locale).sans,width:180,left:"calc(50% - 90px)",padding:"0.3em 1.5em 0.3em",pointerEvents:"none",position:"absolute",top:"calc(50% - 10px)",textAlign:"center"};return(0,m.jsx)(g().Z,{isVisible:!0,animationStyle:{opacity:i?1:0},render:()=>(0,m.jsx)("div",{style:o,"aria-hidden":!i,children:(0,m.jsx)(l()._H,{defaultMessage:"Drag image to reposition",id:"withImageRepositioning.dragImage.text"})})})}},983420:(e,t,i)=>{i.d(t,{TL:()=>u,nc:()=>c,ue:()=>d});var o=()=>i(266897),n=()=>i(554368),s=()=>i(177420),r=()=>i(519889),a=()=>i(401898),l=()=>i(206258);function d(e){const{parentStore:t,pointer:i}=e,n=(0,l().Kv)(t,i).getValue();if(n)return(0,o().LU)({table:i.table,value:n})}function c(e){const{parentStore:t,pointer:i}=e;return i.table===s().cZ?l().Qx.createChildStore(t,i):i.table===r().KJ?l().U6.createChildStore(t,i):i.table===n().y0?l().fg.createChildStore(t,i):void(0,a().t1)(i)}function u(e){return e.table===s().cZ?(0,o().ON)(e.getValue()):e.table===r().KJ?(0,o().m3)(e.getValue()):e.table===n().y0?(0,o().I4)(e.getValue()):void(0,a().t1)(e)}},764286:(e,t,i)=>{i.d(t,{u:()=>r});var o=()=>i(80444),n=()=>i(385555),s=()=>i(215010);function r(e){const{currentUserSettingsStore:t}=o().default.state;if(!t)return!1;const i=(0,s().e2)(t);return!("number"==typeof i&&i>7)&&(!e.device.isMobile&&"on"===n().default.getEligibleGroup({experimentId:"slash_menu_tooltip",defaultGroup:"control"}))}},751423:(e,t,i)=>{i.d(t,{k:()=>n});i(667294);var o=i(785893);const n=(0,i(745238).IU)("arrowRightSmaller",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M15.383 8.352a.877.877 0 01-.274.64l-5.156 5.14a.864.864 0 01-.617.266.831.831 0 01-.602-.234.795.795 0 01-.234-.586c0-.12.02-.232.063-.336a.912.912 0 01.187-.273l1.75-1.766 2.914-2.656.274.5-2.711.156H1.484c-.26 0-.471-.078-.632-.234a.851.851 0 01-.235-.617c0-.256.078-.461.235-.618a.856.856 0 01.632-.242h9.493l2.71.164-.273.508L10.5 5.5 8.75 3.727a.946.946 0 01-.188-.266.917.917 0 01-.062-.344c0-.234.078-.43.234-.586a.831.831 0 01.602-.234.79.79 0 01.328.07c.104.047.203.117.297.211l5.148 5.133a.877.877 0 01.274.64z"})})},675702:(e,t,i)=>{i.d(t,{y:()=>o().y});var o=()=>i(920669)},154752:(e,t,i)=>{i.d(t,{W:()=>s});var o=()=>i(716489),n=()=>i(80444);function s(){const{currentSpaceStore:e}=(0,o().VK)((()=>n().default.state),[]);return null==e?void 0:e.id}},935851:(e,t,i)=>{i.d(t,{Z:()=>n});var o=()=>i(730120);class n{constructor(){this.UNVISITED_FRECENCY_SCORE=1}getFrecencyRankedActions(e,t){const i=Date.now();return Object.keys(e).sort(((o,n)=>{const s=e=>Math.ceil(e.frequency*this.getWeightForVisit(i,e.lastAccessed,t)),r=e[o],a=e[n],l=void 0!==(null==r?void 0:r.frequency)&&void 0!==(null==r?void 0:r.lastAccessed)?s(r):this.UNVISITED_FRECENCY_SCORE,d=void 0!==(null==a?void 0:a.frequency)&&void 0!==(null==a?void 0:a.lastAccessed)?s(a):this.UNVISITED_FRECENCY_SCORE;return l===d?0:d-l}))}getWeightForVisit(e,t,i){const{TIME_BUCKETS:n,DEFAULT_BUCKET_WEIGHT:s}=i,r=o().ou.fromMillis(e).diff(o().ou.fromMillis(t),"hours").as("hours");for(const o of n){if(r<=o.hours)return o.weight}return s}}},539333:(e,t,i)=>{i.r(t),i.d(t,{SlashMenu:()=>de});var o=i(667294),n=()=>i(800480),s=()=>i(716489),r=()=>i(475076),a=()=>i(115944),l=()=>i(68204),d=()=>i(495160),c=()=>i(764286),u=()=>i(268056),p=()=>i(731352),g=()=>i(318245),m=()=>i(80444),h=()=>i(27724),f=()=>i(924666),v=()=>i(188845),b=()=>i(709291),y=()=>i(433929),x=()=>i(704266);const M=(0,b().vU)({addButtonPlaceholder:{defaultMessage:"Type to filterâ€¦",id:"text.commandsMenuOpen.placeholder"},slashInsertionPlaceholder:{defaultMessage:"Filterâ€¦",id:"slashMenu.slashInsertion.placeholder"}});var S=()=>i(313991),k=()=>i(953437),C=()=>i(460709),w=()=>i(825464),T=()=>i(223196),P=()=>i(587244),L=()=>i(574034),R=()=>i(748019),B=()=>i(478140),Z=()=>i(672495),j=()=>i(229798),_=()=>i(483310),E=()=>i(724405),U=()=>i(552097),I=()=>i(552275),V=()=>i(661519),F=()=>i(81254),A=()=>i(707124),D=()=>i(863296),K=()=>i(887199),N=()=>i(922472),O=i(785893);function W(){const e=(0,b().YB)(),t=(0,E().yK)((e=>({container:{padding:"14px",borderBottom:`1px solid ${e.stroke.regular}`},buttonStyle:{gap:"4px",padding:"0px 12px 0px 8px",borderRadius:"6px"},title:{paddingBottom:"8px"},upgradeItem:{marginTop:6,marginBottom:6},upgradeTitle:{color:e.text.uiBluePrimary},divider:{color:e.regularDividerColor}})),[]),[i,s]=(0,o.useState)(!1),r=(0,n().O7)();return v()._H()?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(I().Z,{focused:i,onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),onClick:()=>{N().y(r,{from:"slash_menu",product:"plus"})},buttonStyle:t.upgradeItem,icon:(0,O.jsx)(F().x,{iconGroup:U().t,colorName:"uiBluePrimary",variantName:"default"}),title:(0,O.jsx)(b()._H,{id:"slashMenuBlockLimit.title",defaultMessage:"<span>Upgrade plan</span> to add content",values:{span:e=>(0,O.jsx)("span",{style:t.upgradeTitle,children:e})}})}),(0,O.jsx)(V().Z,{size:2,style:t.divider})]}):(0,O.jsxs)("div",{style:t.container,children:[(0,O.jsx)("div",{style:t.title,children:(0,O.jsx)(A().q,{styleName:"UIRegular-14px/Regular",children:e.formatMessage(K().hC.slashMenuTitle)})}),(0,O.jsxs)(D().Z,{style:t.buttonStyle,onClick:()=>{N().y(r,{from:"slash_menu",product:"plus"})},children:[(0,O.jsx)(F().x,{iconGroup:U().t,colorName:"uiBluePrimary",variantName:"default"}),e.formatMessage(K().hC.upgradeCta)]})]})}var G=()=>i(170060),z=(i(267602),i(653476),i(749411),i(241792),i(731107),()=>i(541432)),H=()=>i(113493),Y=()=>i(935851),q=()=>i(385555),$=()=>i(835665);const Q=[H().yz.key,`insert ${z().Ti.embed}`,`insert ${z().Ti.toggle}`,`insert ${z().Ti.callout}`];function J(e){const{sections:t,isEmptyBlock:i,suggestionCount:o}=e,n=t.flatMap((e=>e.actions)).reduce(((e,t)=>(e[t.key]=t,e)),{});if(function(){const e=q().default.getEligibleGroup({experimentId:"slash_menu_experiment_3_existing_users"}),t=q().default.getEligibleGroup({experimentId:"slash_menu_experiment_3_new_users"});return"personalized_suggestions"===e||"personalized_suggestions"===t}()){const e=function(e){const t={TIME_BUCKETS:[{hours:4,weight:100},{hours:12,weight:80},{hours:24,weight:70},{hours:72,weight:60},{hours:168,weight:50},{hours:336,weight:40},{hours:672,weight:30}],DEFAULT_BUCKET_WEIGHT:20};return(new(Y().Z)).getFrecencyRankedActions(e,t)}($().Z.get()),t=function(e){const{suggestionCount:t,actionsByKey:i,frecencyRankedActions:o,isEmptyBlock:n}=e,s=Object.entries(i).filter((e=>{let[t,i]=e;if(te.includes(t))return!1;if(n){if(t.match(ee))return!0;if(t.match(X))return!1}return!0})),r=s.filter((e=>{let[t,i]=e;return o.includes(t)})).sort(((e,t)=>{let[i,n]=e,[s,r]=t;return o.indexOf(i)-o.indexOf(s)})).slice(0,t).map((e=>{let[t,i]=e;return t}));return r}({suggestionCount:o,actionsByKey:n,frecencyRankedActions:e,isEmptyBlock:i});return t.map((e=>n[e]))}return n[H().yz.key]=H().yz,Q.map((e=>n[e])).filter(Boolean).slice(0,o)}const X="(turn into|action).*",ee="(action color).*",te=["action more"];var ie=()=>i(514355);function oe(e){const{filter:t,sectionsCount:i,focused:o,onClick:n,isAddMenu:a}=e,l=(0,b().YB)(),d=(0,E().yK)((e=>({divider:{color:e.lightDividerColor},shortcut:{color:e.lightTextColor,fontSize:12,whiteSpace:"nowrap"},titleText:{color:e.lightTextColor},titleFilterText:{color:e.regularTextColor}})),[]),c=l.formatMessage({id:"slashMenuItems.typeOnPage.message",defaultMessage:"Type '/{filter}' on the page"},{filter:t}),u=(0,O.jsx)("div",{children:c.split("'").map(((e,i)=>{if(e===`/${t}`){const t=a?e.slice(1):e;return(0,O.jsxs)("span",{style:d.titleText,children:["â€˜",(0,O.jsx)("span",{style:d.titleFilterText,children:t}),"â€™"]},i)}return(0,O.jsx)("span",{style:d.titleText,children:e},i)}))}),p=(0,s().VK)((()=>(0,r().ap)()),[]);return(0,O.jsxs)(O.Fragment,{children:[i>0?(0,O.jsx)(V().Z,{size:2,style:d.divider}):void 0,(0,O.jsx)(Z().Z,{children:(0,O.jsx)(I().Z,{focused:o,onClick:n,title:u,right:(0,O.jsx)("span",{style:d.shortcut,children:"esc"}),desktopTitleStyle:p})})]})}const ne=4,se=(0,b().vU)({suggestedSectionTitle:{id:"slashMenu.suggestedSection.title",defaultMessage:"Suggested"}});function re(e){const{sections:t,slashMenuState:i,menuProps:a,isEmptyBlock:c}=e,u=(0,n().O7)(),p=v()._H(),g=(0,s().VK)((()=>v().QT(i)),[i]),m=(0,s().VK)((()=>h().default.state.stores),[]),f=(0,s().VK)((()=>(0,_().M_)(u)),[u]),x=(0,s().VK)((()=>(0,G().vT)()),[]),M=(0,o.useMemo)((()=>({environment:u,blocks:m,originRect:i.selectionRect,publicEditMode:void 0})),[u,m,i.selectionRect]),S=(0,s().VK)((()=>(0,l().sG)({sections:t,context:M,query:g||""}).length),[t,M,g]),k=p&&!!g,C=(0,s().qz)(void 0,j().Z),w=(0,s().VK)((()=>C.getState().focus.footerFocused),[C]),T=(0,o.useCallback)((()=>{(0,d().j)({environment:u,event:{eventName:"close_slash_menu",eventProperties:{id:i.id,source:"click_type_on_page"}}}),v().xv({environment:u,dismissed:!0})}),[u,i.id]),P=k?(0,O.jsx)(oe,{focused:w??!1,filter:g,sectionsCount:S,onClick:T,isAddMenu:i.isAddMenu}):void 0,E=k?{onFooterEnter:T}:{},U=p&&Boolean(g)&&S>0,I=(0,s().VK)((()=>({desktopTitleStyle:(0,r().ap)(),itemMarginLeft:p?0:void 0,itemMarginRight:p?4:void 0,desktopIconStyle:p?{marginLeft:4}:void 0,svgStyle:p?{height:20,width:20,margin:4}:void 0,svgCustomFill:p?e=>e.mediumIconColor:void 0})),[p]),V=v().Us()&&!g,F=(0,s().VK)((()=>{if(V){const e=function(e){const{isEmptyBlock:t,sections:i}=e,o={height:32,alignItems:"center",marginTop:0,marginBottom:0},n=J({suggestionCount:ne,sections:i,isEmptyBlock:t});return n.length?{key:ie().FJ,title:y().Z.formatMessage(se.suggestedSectionTitle),actions:n,render:e=>(0,O.jsx)(Z().Z,{...e,desktopTitleStyle:o})}:void 0}({sections:t,isEmptyBlock:c});return e?[e,...t]:t}return t}),[V,t,c]);return(0,O.jsxs)(B().Z,{...a,footer:P,children:[x&&!f?(0,O.jsx)(W,{}):null,U?(0,O.jsx)(Z().Z,{style:{paddingBottom:0},desktopTitleStyle:{height:32,alignItems:"center",marginTop:0,marginBottom:0},title:(0,O.jsx)(b()._H,{id:"slashMenuItems.filteredResults",defaultMessage:"Filtered results"})}):null,(0,O.jsx)(R().Z,{sections:F,onAccept:(e,t,i,o,n)=>{if(!f)return(0,_().eD)(u);!function(e,t,i,o){L().createAndCommit({userAction:"SlashMenu.handleAccept",environment:t,perform:n=>{v().RL({environment:t,transaction:n,action:e,sectionKey:i,itemIndex:o})}})}(e,u,o,n)},context:M,filter:g,flattenSectionsOnSearch:p,initialFocus:0,resetFocusOnMouseOut:!0,useLimit:!0,showNoResultsMessage:!p,menuListStore:C,renderItemStyles:I,...E})]})}function ae(e){const{sections:t,slashMenuState:i,isEmptyBlock:o}=e,s=(0,n().O7)(),r=(0,n().Fy)(),a=i.isAddMenu?8:12,l=r.isMobileNative&&!r.isTablet&&!r.isIpad,c=`min(448px, ${r.isMobile?"25vh":"40vh"})`;return(0,O.jsx)(k().ZP,{popupType:r.isMobileNative&&!r.isTablet?T().k.SlideUp:T().k.Popup,open:!0,originRect:i.selectionRect,placementToOrigin:w().Placement.Bottom,alignmentToOrigin:w().Alignment.Start,originGap:a,disableMouseCapture:!0,disableContentScroll:!0,preventBlockRenderQueueOnEnter:!0,onDismiss:()=>{(0,d().j)({environment:s,event:{eventName:"close_slash_menu",eventProperties:{id:i.id,source:"esc"}}}),v().xv({environment:s,dismissed:!0})},render:()=>(0,O.jsx)(P().N,{step:"create_page_beyond_text",showSidebarOverlays:!1,onBackButtonClick:()=>v().xv({environment:s,dismissed:!0}),onNextButtonClick:()=>v().xv({environment:s,dismissed:!0}),children:(0,O.jsx)(le,{sections:t,slashMenuState:i,isMobileNative:l,environment:s,menuMaxHeight:c,isEmptyBlock:o})})})}function le(e){const{sections:t,slashMenuState:i,isMobileNative:o,environment:n,menuMaxHeight:s,isEmptyBlock:r}=e;let a;return a=o?{menuType:C().o.ActionSheet}:{menuType:C().o.Popup,width:"fr-FR"===S().locale?375:324,maxHeight:s,onClickOutside:()=>{(0,d().j)({environment:n,event:{eventName:"close_slash_menu",eventProperties:{id:i.id,source:"click_outside"}}}),v().xv({environment:n,dismissed:!0})}},(0,O.jsx)(re,{sections:t,slashMenuState:i,menuProps:a,isEmptyBlock:r})}function de(){const e=(0,n().O7)(),t=(0,s().VK)((()=>x().Z.state),[]),i=t.open&&t.isAddMenu,b=function(){const e=(0,s().VK)((()=>x().Z.state),[]);return(0,o.useCallback)((t=>{var i;if(!e.open)return;if(!t)return void e.temporaryInputDataStore.setState(void 0);const{title:o,isAddMenu:n}=t,s=!["/","+"].includes(o)||e.oldTextValue&&0!==(null===(i=e.oldTextValue)||void 0===i?void 0:i.length)?"":n?y().Z.formatMessage(M.addButtonPlaceholder):y().Z.formatMessage(M.slashInsertionPlaceholder);e.temporaryInputDataStore.setState({prefix:n?"+":"/",suffix:"",completion:s,prefixIcon:void 0})}),[e])}(),S=(0,s().VK)((()=>t.open?f().default.state:void 0),[t]),k=function(e){const{slashMenuState:t,environment:i}=e,n=(0,o.useMemo)((()=>(0,r().PU)(i)),[i]);return(0,s().VK)((()=>t.open?t.isAddMenu?n.state.insertActions:n.state.slashActions:[]),[t,n])}({slashMenuState:t,environment:e}),C=(0,o.useRef)(!0),w=(0,s().VK)((()=>t.open&&!t.oldTextValue),[t]);return(0,o.useEffect)((()=>{let e=x().Z.state.open;function t(t){if(t.state.open&&e!==t.state.open){const e=C.current?"slash_menu_first_open_lag":"slash_menu_open_lag";g().default.mark(e)}e=t.state.open}return x().Z.addListener(t),()=>{x().Z.removeListener(t)}}),[]),(0,o.useEffect)((()=>{if(t.open&&S){var o;if("editing"!==S.mode)return;const n=v().QT(t);b({title:n||"/",isAddMenu:i});const s=(0,l().sG)({sections:k,context:{blocks:h().default.state.stores,environment:e,publicEditMode:void 0},query:n||""});let r=0,g=t;n&&(0===s.length?r=n.length-t.lettersAtLastResult:(g={...t,lettersAtLastResult:(null==n?void 0:n.length)??0,filter:n},x().Z.setState(g)));const{currentUserSettingsStore:f}=m().default.state;!f||null!==(o=f.getSettings())&&void 0!==o&&o.pressed_slash_tooltip||!(0,c().u)(e)||a().q(e);const{multiSelection:y}=S;!t.open||(0,u().qS)(y)&&y.start.store===g.textStore&&!p().Ye(n,!0,s.length,r,g.textStore)||((0,d().j)({environment:e,event:{eventName:"close_slash_menu",eventProperties:{id:t.id,source:n?"auto_close":"backspace"}}}),v().xv({environment:e,dismissed:!0}))}}),[e,k,S,t,b,i]),(0,o.useEffect)((()=>{if(t.open){const t=C.current?"slash_menu_first_open_lag":"slash_menu_open_lag";g().default.measure(t,{environment:e}),C.current=!1}}),[e,t]),t.open?(0,O.jsx)(ae,{sections:k,slashMenuState:t,isEmptyBlock:w}):null}},943604:(e,t,i)=>{i.d(t,{Z:()=>o});const o=i(749085).default.createValue({open:!1},{name:"ConfirmOverwriteModalStore"})},914542:(e,t,i)=>{i.d(t,{EP:()=>s,LU:()=>r,NS:()=>n,SS:()=>o,ZP:()=>l});const o="loadingLocalImage",n="uploading",s="downloading",r="loaded";class a extends(()=>i(749085))().default{getInitialState(){return{loadingMode:r}}}const l=a},45325:(e,t,i)=>{i.r(t),i.d(t,{default:()=>n});class o extends(()=>i(749085))().default{getInitialState(){return{discussionIdToExpansionStartPointMap:{}}}}const n=new o},896809:(e,t,i)=>{i.d(t,{Z:()=>o});const o=new(i(914542).ZP)},887199:(e,t,i)=>{i.d(t,{hC:()=>r,hL:()=>s,kF:()=>n});var o=()=>i(709291);const n=(0,o().vU)({paymentMethodUnverified:{id:"subscriptions.paymentMethodUnverified",defaultMessage:"Your payment is being processed. Please try again when your payment has completed."},otherPaymentMethod:{id:"subscriptions.otherPaymentMethod",defaultMessage:"Other"},adminOnlyAction:{id:"subscriptions.adminOnlyAction",defaultMessage:"Only workspace owners can perform this action."},iosSubscriptionRestriction:{id:"subscriptions.iosSubscriptionRestriction",defaultMessage:"You're currently subscribed through an in-app purchase with Apple. To change your subscription, cancel your subscription with Apple first."},androidSubscriptionRestriction:{id:"subscriptions.androidSubscriptionRestriction",defaultMessage:"You're currently subscribed through an in-app purchase with Google. To change your subscription, cancel your subscription with Google first."}}),s=(0,o().vU)({trialTitle:{id:"nudges.trial.title",defaultMessage:"Notion for collaboration"},trialDescription:{id:"nudges.trial.description",defaultMessage:"Get 14 days of unlimited content creation with others"},trialCta:{id:"nudges.trial.cta",defaultMessage:"Try it for free"},trialTooltip:{id:"nudges.trial.tooltip",defaultMessage:"Use Notion as much as you want, with as many people as you like. Youâ€™ll receive a reminder when your trial is ending, and can cancel anytime."},approachingBlockLimitTitle:{id:"nudges.approachingBlockLimit.title",defaultMessage:"Upgrade to go unlimited"},approachingBlockLimitDescription:{id:"nudges.approachingBlockLimit.description",defaultMessage:"Continue using Notion to collaborate with others"},approachingBlockLimitTooltip:{id:"nudges.approachingBlockLimit.tooltip",defaultMessage:"Youâ€™re reaching the maximum number of free blocks given on your plan ({percentageUsed}). You wonâ€™t be able to create more content unless you upgrade to the Plus plan."},reachedBlockLimitTitle:{id:"nudges.reachedBlockLimit.title",defaultMessage:"Keep using Notion"},reachedBlockLimitDescription:{id:"nudges.reachedBlockLimit.description",defaultMessage:"{spaceName} has used 100% of the free blocks in the workspace"},manageMembersCta:{id:"nudges.manageMembers.cta",defaultMessage:"Manage members"},reachedBlockLimitCta:{id:"nudges.reachedBlockLimit.cta",defaultMessage:"Upgrade plan"},reachedBlockLimitCtaForMembers:{id:"spaceSettings.sidebar.button.contactWorkspaceOwner",defaultMessage:"Contact a workspace owner"},reachedBlockLimitTooltip:{id:"nudges.reachedBlockLimit.tooltip",defaultMessage:"Youâ€™ve reached the maximum number of free blocks for your plan (100%). You wonâ€™t be able to create more content unless you upgrade to the Plus plan."}}),r=(0,o().vU)({enteringMultiplayerTitle:{id:"blockLimit.enteringMultiplayer.title",defaultMessage:"Collaborate in Notion"},enteringMultiplayerDescription:{id:"blockLimit.enteringMultiplayer.description",defaultMessage:"You have 1,000 blocks to create content with your team"},enteringMultiplayerLearnMore:{id:"blockLimit.enteringMultiplayer.learnMore",defaultMessage:"Learn more"},approachingBlockLimitTitle:{id:"blockLimit.approachingBlockLimit.title",defaultMessage:"Running out of free blocks"},approachingBlockLimitDescription:{id:"blockLimit.approachingBlockLimit.description",defaultMessage:"Youâ€™ve used most of this workspaceâ€™s 1,000 free blocks"},approachingBlockLimitTooltip:{id:"blockLimit.approachingBlockLimit.tooltip",defaultMessage:"You won't be able to create new content unless you upgrade to a paid plan"},enteringGracePeriodTitle:{id:"blockLimit.enteringGracePeriod.title",defaultMessage:"{dayCount, plural, one {1 day} other {{dayCount} days}} left to upgrade"},enteringGracePeriodDescription:{id:"blockLimit.enteringGracePeriod.description",defaultMessage:"This workspace is out of free blocks for you and your team"},enteringGracePeriodTooltip:{id:"blockLimit.enteringGracePeriod.tooltip",defaultMessage:"Notion is free & unlimited for workspaces with 1 member"},enteringGracePeriodTooltipSubtitle:{id:"blockLimit.enteringGracePeriod.tooltipDescription",defaultMessage:"You can manage members via the People tab in settings"},afterGracePeriodTitle:{id:"blockLimit.afterGracePeriod.title",defaultMessage:"Keep using Notion"},afterGracePeriodDescription:{id:"blockLimit.afterGracePeriod.description",defaultMessage:"Youâ€™ve used all of this workspaceâ€™s free blocks"},afterGracePeriodTooltip:{id:"blockLimit.afterGracePeriod.tooltip",defaultMessage:"You can only create new content when you upgrade your plan"},toastUpgradeTitle:{id:"blockLimit.toastUpgrade.title",defaultMessage:"Upgrade to add content"},toastUpgradeDescription:{id:"blockLimit.toastUpgrade.description",defaultMessage:"Upgrade to continue creating and collaborating on Notion"},blockOptionsDescription:{id:"blockLimit.blockOptions.description",defaultMessage:"Upgrade your plan to continue creating and collaborating on Notion"},upgradeCta:{id:"blockLimit.upgradeCta",defaultMessage:"Upgrade plan"},slashMenuTitle:{id:"blockLimit.slashMenuTitle",defaultMessage:"Upgrade to add content to your workspace"}})},259076:(e,t,i)=>{i.d(t,{default:()=>s});class o extends(()=>i(749085))().default{getInitialState(){return{open:!1,isShowingLoadingState:!1}}updateUserCustomizations(e,t){this.state.open&&this.state.collectionTemplate&&this.setState({...this.state,userCustomizations:{...this.state.userCustomizations,[e]:t}})}updateCollectionTemplate(e){this.state.open&&this.state.collectionTemplate&&this.setState({...this.state,collectionTemplate:e})}updatePreviewCollectionViewTemplateId(e){this.state.open&&this.state.collectionTemplate&&this.setState({...this.state,previewCollectionViewTemplateId:e})}getParentStore(){return this.state.open?this.state.parentStore:void 0}close(e){var t,i;this.state.open&&(null===(t=(i=this.state).onClose)||void 0===t||t.call(i,e),this.setState({open:!1,isShowingLoadingState:!1}))}reset(){this.setState(this.getInitialState())}}const n=new o;(0,i(292595).exposeDebugValue)("InitializeWorkflowTemplateModalStore",n);const s=n},552097:(e,t,i)=>{i.d(t,{t:()=>o});const o=(0,i(745238).CZ)("arrowUpCircled",{default:{loader:()=>i.e(76531).then(i.bind(i,876531)),size:20},small:{loader:()=>i.e(39974).then(i.bind(i,439974)),size:16},mini:{loader:()=>i.e(80026).then(i.bind(i,580026)),size:14},large:{loader:()=>i.e(7148).then(i.bind(i,607148)),size:24}})}}]);